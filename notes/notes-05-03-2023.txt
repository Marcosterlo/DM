We have to define the callback functions, we pass to mosquitto_connect_callback_set the pointer to a function, seeing the docs we see: " void (*on_connect)(struct mosquitto *, void *, int) " this means we want the pointer to a void returning function with arguments a struct mosquitto pointer, a pointer to general data (void *) and an integer

Some librarie as synchronous and other asynchronous. Mosquitto connect is synchronous, for example mosquitto_connect is not immediately executed, is just queued but it immediately returns a value, in this way we can't immediately know if the connection is successful or not. For this reason we established a callback for when the connection is succesfully established. We have to wait for real connection establishment in machine_connect. 